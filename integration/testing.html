<HTML>
   <HEAD>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
      <script src="https://sdk-cdn.mypurecloud.com/client-apps/1.3.0/purecloud-client-app-sdk.js"></script>
      <script src="https://sdk-cdn.mypurecloud.com/javascript/latest/purecloud-platform-client-v2.min.js"></script>      
      <script type="text/javascript">

//constants
const DEFAULT_LANG_TAG = "en-us";
const DEFAULT_ENV_TAG = "usw2.pure.cloud";
const DEFAULT_USER_TYPE = "unknown";
const appName = "AcuityIntegration";

const platformClient = require('platformClient');
const client = platformClient.ApiClient.instance;
client.setEnvironment(DEFAULT_ENV_TAG);
client.setPersistSettings(true, appName);

const usersApi = new platformClient.UsersApi();
//global items

function DoIntegration() {
   //login to the API
   DoApiLogin();
   //determine what calls should be made
   //make API calls
}

function DoApiLogin() {
   let clientId = "64b7ad33-cf41-45ef-a633-60a4aeb3a533";
   let redirectUri = window.location.origin + window.location.pathname;

   debugger;

   client.loginImplicitGrant(clientId, redirectUri)
      .then((data) => {
         debugger;
         console.log(data);
         return usersApi.getUsersMe({expand: ["organization"]});
         // Do authenticated things
      })
      .then((user)=>{
         debugger;
         console.log(JSON.stringify(user));
         console.log("ORGID: " + user?.organization?.id);
      })
      .catch((err) => {
         // Handle failure response
         console.log(err);
      });

}


$(document).ready(function () {
   DoIntegration();
});



      </script>
   </HEAD>
<BODY>

</BODY>
</HTML>